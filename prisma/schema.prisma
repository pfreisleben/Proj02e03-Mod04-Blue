generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Tweet {
  id            Int                  @id @default(autoincrement())
  content       String               @db.VarChar(140)
  userid        Int
  user          User                 @relation(fields: [userid], references: [id])
  categories    CategoriesOnTweets[]
  favoriteTweet FavoriteTweet[]
  createdAt     DateTime             @default(now()) @map("created_at")
}

model Category {
  id        Int                  @id @default(autoincrement())
  name      String
  tweet     CategoriesOnTweets[]
  createdAt DateTime             @default(now()) @map("created_at")
}

model Follower {
  id        Int      @id @default(autoincrement())
  name      String
  userid    Int
  user      User     @relation(fields: [userid], references: [id])
  createdAt DateTime @default(now()) @map("created_at")
}

model Following {
  id        Int      @id @default(autoincrement())
  name      String
  userid    Int
  user      User     @relation(fields: [userid], references: [id])
  createdAt DateTime @default(now()) @map("created_at")
}

model User {
  id            Int             @id @default(autoincrement())
  name          String
  lastname      String
  username      String          @unique
  password      String
  about         String
  birthday      String
  tweet         Tweet[]
  follower      Follower[]
  following     Following[]
  favoriteTweet FavoriteTweet[]
  createdAt     DateTime        @default(now()) @map("created_at")
}

model CategoriesOnTweets {
  tweet      Tweet    @relation(fields: [tweetid], references: [id])
  tweetid    Int
  category   Category @relation(fields: [categoryid], references: [id])
  categoryid Int
  assignedAt DateTime @default(now())
  assignedBy String

  @@id([tweetid, categoryid])
}

model FavoriteTweet {
  tweetid    Int
  tweet      Tweet    @relation(fields: [tweetid], references: [id])
  userid     Int
  user       User     @relation(fields: [userid], references: [id])
  assignedAt DateTime @default(now())
  assignedBy String

  @@id([tweetid, userid])
}
