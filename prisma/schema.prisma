generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Tweet {
  id            Int                  @id @default(autoincrement())
  conteudo      String               @db.VarChar(140)
  usuarioId     Int
  usuario       Usuario              @relation(fields: [usuarioId], references: [id])
  categorias    CategoriasOnTweets[]
  favoriteTweet FavoriteTweet[]
  criadoEm      DateTime             @default(now()) @map("created_at")
}

model Categoria {
  id       Int                  @id @default(autoincrement())
  name     String
  tweet    CategoriasOnTweets[]
  criadoEm DateTime             @default(now()) @map("created_at")
}

model Seguidores {
  id        Int      @id @default(autoincrement())
  name      String
  usuarioId Int
  usuario   Usuario  @relation(fields: [usuarioId], references: [id])
  criadoEm  DateTime @default(now()) @map("created_at")
}

model Seguindo {
  id        Int      @id @default(autoincrement())
  name      String
  usuarioId Int
  usuario   Usuario  @relation(fields: [usuarioId], references: [id])
  criadoEm  DateTime @default(now()) @map("created_at")
}

model Usuario {
  id            Int             @id @default(autoincrement())
  name          String
  lastname      String
  username      String          @unique
  password      String
  about         String
  birthday      String
  tweet         Tweet[]
  seguidores    Seguidores[]
  seguindo      Seguindo[]
  favoriteTweet FavoriteTweet[]
  criadoEm      DateTime        @default(now()) @map("created_at")
}

model CategoriasOnTweets {
  tweet       Tweet     @relation(fields: [tweetid], references: [id])
  tweetid     Int
  categoria   Categoria @relation(fields: [categoriaid], references: [id])
  categoriaid Int
  assignedAt  DateTime  @default(now())
  assignedBy  String

  @@id([tweetid, categoriaid])
}

model FavoriteTweet {
  tweetid    Int
  tweet      Tweet    @relation(fields: [tweetid], references: [id])
  usuarioId  Int
  usuario    Usuario  @relation(fields: [usuarioId], references: [id])
  assignedAt DateTime @default(now())
  assignedBy String

  @@id([tweetid, usuarioId])
}
